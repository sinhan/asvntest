<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!-- Content Stylesheet for Site -->

	 ## Defined variables
	 #set ($bodybg = "#ffffff")
	 #set ($bodyfg = "#000000")
	 #set ($bodylink = "#525D76")
	 #set ($bannerbg = "#525D76")
	 #set ($bannerfg = "#ffffff")
	 #set ($subbannerbg = "#828DA6")
	 #set ($subbannerfg = "#ffffff")
	 #set ($tablethbg = "#039acc")
	 #set ($tabletdbg = "#a0ddf0")
	 #set ($notebackground = "#bbbb00")
	 #set ($space = " ")
	 #set ($space = $space.charAt(0))
	 #set ($udsc = "_")
	 #set ($udsc = $udsc.charAt(0))

<!-- start the processing -->
#document()
<!-- end the processing -->

## This is where the macro's live

#macro ( table $table)
<table>
	 #foreach ( $items in $table.getChildren() )
		  #if ($items.getName().equals("tr"))
				#tr ($items)
		  #end
	 #end
</table>
#end

#macro ( tr $tr)
<tr>
	 #foreach ( $items in $tr.getChildren() )
		  #if ($items.getName().equals("td"))
				#td ($items)
		  #elseif ($items.getName().equals("th"))
				#th ($items)
		  #end
	 #end
</tr>
#end

#macro ( td $value)
#if ($value.getAttributeValue("colspan"))
#set ($colspan = $value.getAttributeValue("colspan"))
#end
#if ($value.getAttributeValue("rowspan"))
#set ($rowspan = $value.getAttributeValue("rowspan"))
#end
<td bgcolor="$tabletdbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
		  #if ($value.getText().length() != 0 || $value.hasChildren())
		  $xmlout.outputString($value, true)
		  #else
		  &nbsp;
		  #end
	 </font>
</td>
#end

#macro ( th $value)
#if ($value.getAttributeValue("colspan"))
#set ($colspan = $value.getAttributeValue("colspan"))
#end
#if ($value.getAttributeValue("rowspan"))
#set ($rowspan = $value.getAttributeValue("rowspan"))
#end
<td bgcolor="$tablethbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
		  #if ($value.getText().length() != 0 || $value.hasChildren())
		  $xmlout.outputString($value, true)
		  #else
		  &nbsp;
		  #end
	 </font>
</td>
#end

#macro ( projectanchor $name $value )
#if ($value.startsWith("http://"))
	 <a href="$value">$name</a>
#elseif ($value.startsWith("/site"))
	 <a href="http://jakarta.apache.org$value">$name</a>
#else
	 <a href="$relativePath$value">$name</a>
#end
#end

#macro ( metaauthor $author $email )
				<meta name="author" value="$author">
				<meta name="email" value="$email">
#end

#macro ( image $value )
#if ($value.getAttributeValue("width"))
#set ($width=$value.getAttributeValue("width"))
#end
#if ($value.getAttributeValue("height"))
#set ($height=$value.getAttributeValue("height"))
#end
#if ($value.getAttributeValue("align"))
#set ($align=$value.getAttributeValue("align"))
#end
<img src="$relativePath$value.getAttributeValue("src")" width="$!width" height="$!height" align="$!align">
#end

#macro ( source $value)
	 <div align="left">
	 <table cellspacing="4" cellpadding="0" border="0">
	 <tr>
		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
	 </tr>
	 <tr>
		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
		<td bgcolor="#ffffff"><pre>$escape.getText($value.getText())</pre></td>
		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
	 </tr>
	 <tr>
		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
	 </tr>
	 </table>
	 </div>
#end

#macro (properties $properties)
<p>
	<b>Parameters</b>
	<table border="1" cellspacing="0" cellpadding="2">
	<tr><th>Attribute</th><th>Description</th><th>Required</th></tr>
	#foreach ($items in $properties.getChildren("property"))
		<tr>
			<td>$items.getAttributeValue("name")</td>
			<td>#runloop($items)</td>
			<td>
					#if($items.getAttributeValue("required") != "")
						$items.getAttributeValue("required")
					#else
						No
					#end
			</td>
		</tr>
	#end
	</table>
	</p>
#end

#macro (seeAlso $seeAlso)
	<p><b>See Also:</b>
	<ul>
	#foreach ($items in $seeAlso.getChildren())
		#if($items.getName() == "link")
			<li><a href="$items.getAttributeValue("href")">$xmlout.outputString($items,true)</a></li>
		#elseif($items.getName() == "complink")
			<li>#complink($items)</li>
		#end
	#end
	</ul>
	</p>
#end

#macro (figure $figure)
	<p><table border="0" cellspacing="0" cellpadding="0"><tr><td><img src="$figure.getAttributeValue("image")"><br/>
	<font size="-1">#runloop($figure)</font></td></tr></table></p>
#end

#macro (example $example)
	<a name="$example.getAttributeValue("anchor")"/>
	<p><b>$example.getAttributeValue("title")</b></p>
	#runloop($example)
#end

#macro (note $note)
	<p><table border="1" bgcolor="$notebackground" width="50%" cellspacing="0" cellpadding="2">
		<tr><td>#runloop($note)</td></tr>
	</table></p>
#end

#macro (unknown $node)
	#if($node.getName() == "note")
		#note($node)
	#elseif($node.getName() == "complink")
		#complink($node)
	#elseif($node.getName() == "figure")
		#figure($node)
	#elseif ($node.getName() == "links")
		 #seeAlso ($node)
	#elseif ($node.getName() == "properties")
		 #properties ($node)
	#elseif ($node.getName() == "example")
		#example ($node)
	#elseif ($node.getName().equals("source"))
		 #source ($node)
	#elseif ($node.getName().equals("table"))
		 #table ($node)
	#elseif ($node.getName().equals("component"))
		#component($node)
	#elseif ($node.getName().equals("subsection"))
		 #subsection ($node)
	#else
		#outputTag($node)
		#runloop($node)
		#outputEndTag($node)
	#end
#end

#macro (complink $complink)
	<a href="$relativePath/usermanual/component_reference.html#$complink.getAttributeValue("name").replace($space,$udsc)">$complink.getAttributeValue("name")</a>
#end

#macro (outputTag $tag)
	<$tag.getName()#getAtts($tag)>
#end

#macro (getAtts $tag)
	#foreach ($att in $tag.getAttributes()) $att.getName()="$att.getValue()"#end
#end

#macro (outputEndTag $tag)
	</$tag.getName()>
#end

#macro (runloop $itemToLoop)
	#foreach ($node in $itemToLoop.getMixedContent())
		#if($node.getClass().getName().indexOf("Element") > -1)
			#unknown($node)
		#else
			$node
		#end
	#end
#end

#macro ( component $component)
	#set ($screenshot = "")
	#set ($screenshot = $component.getAttributeValue("screenshot") )
	<table border="0" cellspacing="0" cellpadding="2">
		<tr><td>
		  <font face="arial,helvetica,sanserif">
			 <a name="$component.getAttributeValue("name").replace($space,$udsc)"><h3>$!component.getAttributeValue("index") $component.getAttributeValue("name")</h3></a>
		  </font>
		</td></tr>
		<tr><td>
		  #foreach ( $items in $component.getChildren() )
				#if ($items.getName().equals("description"))
					#runloop($items)
					<p><b>Control Panel</b></p>
					#if ($screenshot != "")
						<div align="center"><img src="$screenshot"></div>
					#end
				#else
					 #unknown($items)
				#end
		  #end
		</td></tr>
		<tr><td><br/></td></tr>
	 </table>
	<hr>
#end

#macro ( subsection $subsection)
	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
		<tr><td bgcolor="$subbannerbg">
		  <font color="$subbannerfg" face="arial,helvetica,sanserif">
			 <a name="$subsection.getAttributeValue("anchor")"><strong>$subsection.getAttributeValue("name")</strong></a>
		  </font>
		</td></tr>
		<tr><td>
		  <blockquote>
		  #foreach ( $items in $subsection.getChildren() )
				#if ($items.getName().equals("img"))
					 #image ($items)
				#else
					 #unknown($items)
				#end
		  #end
		  </blockquote>
		</td></tr>
		<tr><td><br/></td></tr>
	 </table>
#end

#macro ( section $section)
	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
		<tr><td bgcolor="$bannerbg">
		  <font color="$bannerfg" face="arial,helvetica,sanserif">
			 <a name="$!section.getAttributeValue("anchor")"><strong>$section.getAttributeValue("name")</strong></a>
		  </font>
		</td></tr>
		<tr><td>
		  <blockquote>
		  #foreach ( $items in $section.getChildren() )
				#if ($items.getName().equals("img"))
					 #image ($items)
				#else
					 #unknown($items)
				#end
		  #end
		  </blockquote>
		  </p>
		</td></tr>
		<tr><td><br/></td></tr>
	 </table>
#end

#macro ( makeProject )
	 #set ($menus = $project.getChild("body").getChildren("menu"))
	 #foreach ( $menu in $menus )
		  <p><strong>$menu.getAttributeValue("name")</strong></p>
		  <ul>
		  #foreach ( $item in $menu.getChildren() )
				#set ($name = $item.getAttributeValue("name"))
				<li>#projectanchor($name $item.getAttributeValue("href"))</li>
		  #end
		  </ul>
	 #end
#end

#macro (makeIndex $subsections)
	<ul>
	#foreach ($sect in $subsections)
		<li><a href="#$sect.getAttributeValue("anchor")">$sect.getAttributeValue("name")</a></li>
		<ul>
		#foreach ($comp in $sect.getChildren("component"))
			<li><a href="#$comp.getAttributeValue("name").replace($space,$udsc)">$comp.getAttributeValue("name")</a></li>
		#end
		</ul>
	#end
	</ul>
#end

#macro (getProjectImage)
#if ($project.getChild("logo"))
<td align="left">
<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" border="0"/></a>
</td>
<td align="right">
#set ( $logoString = $project.getChild("logo").getAttributeValue("href") )
#if ( $logoString.startsWith("/") )
<a href="$project.getAttributeValue("href")"><img src="$relativePath$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
#else
<a href="$project.getAttributeValue("href")"><img src="$relativePath/$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
#end
</td>
#else
<td colspan="2">
<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" align="left" border="0"/></a>
</td>
#end
#end

#macro (document)
	 <!-- ====================================================================== -->
	 <!-- Main Page Section -->
	 <!-- ====================================================================== -->
	 <html>
		  <head>
				<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

				#set ($authors = $root.getChild("properties").getChildren("author"))
				#foreach ( $au in $authors )
					 #metaauthor ( $au.getText() $au.getAttributeValue("email") )
				#end

				<title>$project.getChild("title").getText() - $root.getChild("properties").getChild("title").getText()</title>
		  </head>

		  <body bgcolor="$bodybg" text="$bodyfg" link="$bodylink">
				<table border="0" cellspacing="0">
					 <!-- TOP IMAGE -->
					 <tr>
						  #getProjectImage()
					 </tr>
				</table>
				<table border="0" width="600" cellspacing="4">
					 <tr><td>
						  <hr noshade="" size="1"/>
					 </td></tr>

					 <tr>
						  <td align="left" valign="top">
						  #if ($root.getAttributeValue("index") == "yes")
							#makeIndex($root.getChild("body").getChildren("section"))
						  #end
						  #set ($allSections = $root.getChild("body").getChildren("section"))
						  #foreach ( $section in $allSections )
								#section ($section)
						  #end
						  </td>
					 </tr>

					 <!-- FOOTER -->
					 <tr><td>
						  <hr noshade="" size="1"/>
					 </td></tr>
					 <tr><td>
						  <div align="center"><font color="$bodylink" size="-1"><em>
						  Copyright &#169; 1999-2001, Apache Software Foundation
						  </em></font></div>
					 </td></tr>
				</table>
		  </body>
	 </html>
#end

